# å¦‚ä½•ä½¿ç”¨ foundry-sandbox MCP å·¥å…·æµ‹è¯•åˆçº¦

## å¿«é€Ÿå¼€å§‹

### 1. ç¡®è®¤ MCP æœåŠ¡å™¨é…ç½®

åœ¨ Cursor çš„ MCP é…ç½®ä¸­ï¼Œç¡®ä¿å·²é…ç½® `foundry-sandbox` æœåŠ¡å™¨ï¼š

**é…ç½®æ–‡ä»¶ä½ç½®**ï¼ˆCursorï¼‰ï¼š
- åœ¨ Cursor è®¾ç½®ä¸­æ‰¾åˆ° MCP æœåŠ¡å™¨é…ç½®

**é…ç½®å†…å®¹**ï¼š
```json
{
  "mcpServers": {
    "foundry-sandbox": {
      "command": "node",
      "args": ["/Users/zhangxiao/Documents/work/mcp/foundry-mcp/dist/index.js"]
    }
  }
}
```

### 2. é‡å¯ Cursor

é…ç½®æ›´æ”¹åï¼Œ**å¿…é¡»é‡å¯ Cursor** ä»¥ä½¿ MCP æœåŠ¡å™¨é‡æ–°è¿æ¥ã€‚

### 3. åœ¨ Cursor ä¸­è°ƒç”¨å·¥å…·

åœ¨ Cursor çš„èŠå¤©ç•Œé¢ä¸­ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
è¯·ä½¿ç”¨ foundry-sandbox MCP æœåŠ¡å™¨è¿è¡Œæµ‹è¯•ï¼š
- é¡¹ç›®è·¯å¾„: /Users/zhangxiao/Documents/work/mcp/foundry-mcp
- æµ‹è¯•è·¯å¾„: test
- ä¾èµ–æ¸…å•: dependencies.json
```

æˆ–è€…æ›´ç®€å•çš„ï¼š

```
åœ¨æ²™ç›’ä¸­è¿è¡Œæˆ‘çš„ Foundry é¡¹ç›®æµ‹è¯•ï¼Œé¡¹ç›®è·¯å¾„æ˜¯ /Users/zhangxiao/Documents/work/mcp/foundry-mcp
```

### 4. è§‚å¯Ÿå®æ—¶æ—¥å¿—è¾“å‡º

åœ¨å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ åº”è¯¥èƒ½åœ¨ Cursor ä¸­çœ‹åˆ°ä»¥ä¸‹å®æ—¶æ—¥å¿—ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ å¼€å§‹æ‰§è¡Œ forge test å·¥å…·...
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[MCP Log] â„¹ï¸ âœ… å‚æ•°éªŒè¯é€šè¿‡
[MCP Log] â„¹ï¸ ğŸ“ é¡¹ç›®æ ¹ç›®å½•: /Users/zhangxiao/Documents/work/mcp/foundry-mcp
[MCP Log] â„¹ï¸ ğŸ“¦ è¯»å–åˆ° 1 ä¸ªä¾èµ–é¡¹
[MCP Log] â„¹ï¸ ğŸ“ æµ‹è¯•è·¯å¾„: test

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ æ­¥éª¤ 1/4: æ­£åœ¨åˆ›å»º Docker å®¹å™¨...
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[MCP Log] â„¹ï¸ ğŸš€ æ­¥éª¤ 1/4: æ­£åœ¨åˆ›å»º Docker å®¹å™¨...
[MCP Log] â„¹ï¸ âœ… æ­¥éª¤ 1/4: Docker å®¹å™¨åˆ›å»ºæˆåŠŸ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ æ­¥éª¤ 2/4: æ­£åœ¨æ£€æŸ¥å¹¶å®‰è£… 1 ä¸ªä¾èµ–é¡¹...
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[MCP Log] â„¹ï¸ ğŸ“¦ æ­¥éª¤ 2/4: æ­£åœ¨æ£€æŸ¥å¹¶å®‰è£… 1 ä¸ªä¾èµ–é¡¹...
[MCP Log] â„¹ï¸ âœ… æ­¥éª¤ 2/4: ä¾èµ–å¤„ç†å®Œæˆ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª æ­¥éª¤ 3/4: æ­£åœ¨æ‰§è¡Œæµ‹è¯• (åŒ¹é…è·¯å¾„: test/**/*.t.sol)...
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ æµ‹è¯•è¾“å‡º:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[å®é™…çš„ forge test è¾“å‡º]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[MCP Log] â„¹ï¸ âœ… æ­¥éª¤ 3/4: æµ‹è¯•æ‰§è¡Œå®Œæˆ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§¹ æ­¥éª¤ 4/4: æ­£åœ¨æ¸…ç† Docker å®¹å™¨...
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[MCP Log] â„¹ï¸ ğŸ§¹ æ­¥éª¤ 4/4: æ­£åœ¨æ¸…ç† Docker å®¹å™¨...
[MCP Log] â„¹ï¸ âœ… æ­¥éª¤ 4/4: Docker å®¹å™¨æ¸…ç†å®Œæˆ
[MCP Log] â„¹ï¸ ğŸ‰ å·¥å…·æ‰§è¡Œå®Œæˆ: PASS
```

## å·¥å…·å‚æ•°è¯´æ˜

`forge_test` å·¥å…·éœ€è¦ä»¥ä¸‹å‚æ•°ï¼š

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `projectRoot` | string | âœ… | é¡¹ç›®æ ¹è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰ |
| `testFolderPath` | string | âœ… | æµ‹è¯•æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆç›¸å¯¹é¡¹ç›®æ ¹è·¯å¾„ï¼‰ |
| `dependenciesManifestPath` | string | âœ… | ä¾èµ–æ¸…å•æ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹é¡¹ç›®æ ¹è·¯å¾„ï¼‰ |
| `extraArgs` | string[] | âŒ | é¢å¤–çš„ forge test å‚æ•° |

**å½“å‰é¡¹ç›®å‚æ•°**ï¼š
- `projectRoot`: `/Users/zhangxiao/Documents/work/mcp/foundry-mcp`
- `testFolderPath`: `test`
- `dependenciesManifestPath`: `dependencies.json`

## é¢„æœŸæµ‹è¯•ç»“æœ

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

âœ… **æµ‹è¯•é€šè¿‡**ï¼š7 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡
- testInitialCount
- testIncrement
- testDecrement
- testDecrementRevertsWhenZero
- testReset
- testIncrementEmitsEvent
- testMultipleOperations

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: çœ‹ä¸åˆ°æ—¥å¿—è¾“å‡º

**å¯èƒ½åŸå› **ï¼š
- MCP æœåŠ¡å™¨æœªæ­£ç¡®é…ç½®
- Cursor æœªé‡å¯
- MCP æœåŠ¡å™¨æœªå¯åŠ¨

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ MCP é…ç½®æ˜¯å¦æ­£ç¡®
2. é‡å¯ Cursor
3. æŸ¥çœ‹ Cursor çš„ MCP æ—¥å¿—ï¼ˆå¦‚æœæœ‰ï¼‰

### é—®é¢˜ 2: Docker ç›¸å…³é”™è¯¯

**å¯èƒ½åŸå› **ï¼š
- Docker æœªè¿è¡Œ
- Docker é•œåƒä¸å­˜åœ¨
- å®¹å™¨åˆ›å»ºå¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
docker ps

# æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
docker images foundry-sandbox:latest

# å¦‚æœé•œåƒä¸å­˜åœ¨ï¼Œæ„å»ºé•œåƒ
docker build -t foundry-sandbox:latest -f Dockerfile.foundry .
```

### é—®é¢˜ 3: è·¯å¾„é”™è¯¯

**å¯èƒ½åŸå› **ï¼š
- é¡¹ç›®è·¯å¾„ä¸æ­£ç¡®
- è·¯å¾„ä¸æ˜¯ç»å¯¹è·¯å¾„
- æµ‹è¯•æ–‡ä»¶å¤¹ä¸å­˜åœ¨

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®ä¿ä½¿ç”¨ç»å¯¹è·¯å¾„
- ç¡®ä¿è·¯å¾„æŒ‡å‘åŒ…å« `foundry.toml` çš„ç›®å½•
- ç¡®ä¿ `test` æ–‡ä»¶å¤¹å­˜åœ¨

## éªŒè¯æ¸…å•

åœ¨è°ƒç”¨å·¥å…·å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] MCP æœåŠ¡å™¨å·²æ­£ç¡®é…ç½®
- [ ] Cursor å·²é‡å¯
- [ ] Docker æ­£åœ¨è¿è¡Œ
- [ ] Docker é•œåƒ `foundry-sandbox:latest` å·²æ„å»º
- [ ] é¡¹ç›®è·¯å¾„æ˜¯ç»å¯¹è·¯å¾„
- [ ] `test` æ–‡ä»¶å¤¹å­˜åœ¨
- [ ] `dependencies.json` æ–‡ä»¶å­˜åœ¨

## ä¸‹ä¸€æ­¥

1. âœ… é…ç½® MCP æœåŠ¡å™¨
2. âœ… é‡å¯ Cursor
3. ğŸ”„ åœ¨ Cursor ä¸­è°ƒç”¨å·¥å…·
4. ğŸ“Š è§‚å¯Ÿå®æ—¶æ—¥å¿—è¾“å‡º
5. âœ… éªŒè¯æµ‹è¯•ç»“æœ

ç°åœ¨ä½ å¯ä»¥åœ¨ Cursor ä¸­ç›´æ¥è¯·æ±‚æµ‹è¯•äº†ï¼


